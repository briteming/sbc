---
title: "버그 리포팅 가이드라인"
date: 2025-01-28T23:00:00+09:00
draft: false
tags: ["postgresql", "database"]
---

PostgreSQL에서 버그를 발견하면 즉시 알려주기 바란다. 아무리 철저한 관리를 한다 해도 모든 환경과 상황에서 PostgreSQL의 모든 기능이 완벽하게 동작한다고 보장할 수 없기 때문에, 버그 리포트는 PostgreSQL의 안정성을 높이는 데 매우 중요한 역할을 한다.

다음 제안 사항들은 효율적으로 처리할 수 있는 버그 리포트를 작성하는 데 도움을 줄 것이다. 이를 반드시 따라야 하는 것은 아니지만, 이 가이드라인을 준수하면 모두에게 유익하다.

모든 버그를 즉시 해결할 수는 없다. 버그가 명백하거나 심각하거나 많은 사용자에게 영향을 미치는 경우라면 누군가가 신속히 검토할 가능성이 높다. 때로는 최신 버전으로 업데이트해서 버그가 여전히 발생하는지 확인을 요청할 수도 있다. 또는 계획 중인 주요 재작성 작업 이전에는 수정이 불가능하다고 판단할 수도 있다. 혹은 단순히 버그 수정이 너무 어렵거나 더 중요한 작업이 있을 수도 있다. 긴급한 도움이 필요하다면 상용 지원 계약을 고려해 보기 바란다.

## 5.1. 버그 식별하기

버그를 보고하기 전에 문서를 꼼꼼히 읽고 시도하려는 작업이 실제로 가능한지 확인한다. 문서에서 특정 기능의 가능 여부가 명확하지 않다면 이 또한 문서의 버그이므로 보고한다. 프로그램이 문서의 설명과 다르게 동작한다면 이는 버그다. 다음과 같은 상황이 버그에 해당한다:

* 프로그램이 치명적인 시그널이나 운영체제 오류 메시지와 함께 종료되는 경우. (단, "디스크 공간 부족"과 같이 사용자가 직접 해결해야 하는 문제는 제외한다.)

* 프로그램이 주어진 입력에 대해 잘못된 출력을 생성하는 경우

* 프로그램이 문서에 명시된 올바른 입력을 거부하는 경우

* 프로그램이 잘못된 입력을 알림이나 오류 메시지 없이 받아들이는 경우. 다만, 사용자가 잘못된 입력이라고 생각하는 것이 확장 기능이나 기존 관행과의 호환성을 위한 것일 수 있음을 유의한다.

* PostgreSQL이 지원되는 플랫폼에서 문서의 지침대로 컴파일, 빌드 또는 설치되지 않는 경우

여기서 "프로그램"은 백엔드 프로세스뿐만 아니라 모든 실행 파일을 지칭한다.

실행 속도가 느리거나 리소스를 많이 사용하는 것이 반드시 버그는 아니다. 애플리케이션 성능 최적화에 대한 도움이 필요하다면 문서를 참고하거나 메일링 리스트에 문의한다. SQL 표준을 따르지 않는 것도 반드시 버그는 아니다. 단, 특정 기능이 명시적으로 표준 준수를 주장하는 경우는 예외다.

계속 진행하기 전에 TODO 목록과 FAQ를 확인하여 해당 버그가 이미 알려져 있는지 확인한다. TODO 목록의 정보를 이해할 수 없다면 문제를 보고한다. 최소한 TODO 목록을 더 명확하게 개선할 수 있다.

## 5.2. 버그 리포트 작성 지침

버그 리포트 작성에서 가장 중요한 원칙은 사실만을 명확하게 기술하는 것이다. 무엇이 잘못됐는지 추측하거나, "이렇게 동작하는 것처럼 보였다"는 식의 표현, 또는 프로그램의 어느 부분에 문제가 있는지 짐작하는 내용을 포함하지 않는다. 구현 방식에 익숙하지 않다면 잘못된 추측을 할 가능성이 높고, 이는 전혀 도움이 되지 않는다. 설령 구현 방식을 잘 알고 있더라도, 전문적인 설명은 좋은 보완 자료가 될 수는 있지만 실제 사실을 대체할 수는 없다. 개발자가 버그를 수정하려면 먼저 직접 문제 상황을 재현해 봐야 하기 때문이다. 단순한 사실을 보고하는 것은 비교적 간단하지만(화면에서 복사하여 붙여넣기만 하면 된다), 중요한 세부사항이 누락되는 경우가 많다. 이는 보고자가 그 내용이 중요하지 않다고 판단하거나, 보고서를 보면 알아서 이해할 것이라고 생각하기 때문이다.

버그 리포트에는 다음 항목을 반드시 포함해야 한다:

* 프로그램 시작부터 문제가 발생하기까지의 정확한 단계별 절차. 이 내용은 자체적으로 완결성을 가져야 한다. 테이블의 데이터에 따라 출력이 달라지는 상황이라면, 단순히 `SELECT` 문장만 보내는 것으로는 부족하고 이전의 `CREATE TABLE`과 `INSERT` 문장도 함께 포함해야 한다. 개발자가 데이터베이스 스키마를 역설계할 시간이 없으며, 임의로 데이터를 만들어 테스트하면 실제 문제를 놓칠 수 있다.

  SQL 관련 문제의 테스트 케이스는 psql 프론트엔드로 실행할 수 있는 파일 형식이 가장 좋다. (`~/.psqlrc` 시작 파일에 내용이 없어야 한다.) 이러한 파일을 만드는 쉬운 방법은 pg_dump를 사용해 필요한 테이블 선언문과 데이터를 덤프한 다음, 문제가 되는 쿼리를 추가하는 것이다. 예제의 크기를 최소화하면 좋지만, 이는 필수 사항은 아니다. 버그가 재현 가능하다면 어떤 방식으로든 문제를 찾아낼 것이다.

  PHP와 같은 다른 클라이언트 인터페이스를 사용하는 애플리케이션이라면, 문제가 되는 쿼리를 분리해서 보고하기를 권장한다. 개발팀이 웹 서버를 구성해서 문제를 재현하기는 어렵기 때문이다. 어떤 경우든 정확한 입력 파일을 제공해야 한다. "대용량 파일" 또는 "중간 크기의 데이터베이스"와 같이 모호한 표현은 실제 문제 해결에 도움이 되지 않는다.

* 실제 발생한 결과. "동작하지 않았다" 또는 "충돌했다"와 같은 표현은 피한다. 오류 메시지가 있다면, 이해하지 못하더라도 그대로 보여준다. 운영체제 오류로 프로그램이 종료된다면 해당 오류를 명시한다. 아무 일도 일어나지 않았다면 그 사실을 그대로 기술한다. 테스트 케이스의 결과가 프로그램 충돌이나 명백한 오류라 하더라도, 다른 플랫폼에서는 동일한 현상이 발생하지 않을 수 있다. 가능하다면 터미널의 출력을 그대로 복사하는 것이 가장 좋은 방법이다.

  ### 참고
  
  오류 메시지를 보고할 때는 가장 상세한 형태의 메시지를 확보해야 한다. psql에서는 `set VERBOSITY verbose` 명령을 미리 실행한다. 서버 로그에서 메시지를 추출할 때는 실행 시 매개변수 [log_error_verbosity](https://www.postgresql.org/docs/17/runtime-config-logging.html#GUC-LOG-ERROR-VERBOSITY)를 `verbose`로 설정해 모든 세부 정보가 기록되도록 한다.
  
  ### 참고
  
  치명적인 오류의 경우, 클라이언트가 보고하는 오류 메시지에 모든 정보가 포함되지 않을 수 있다. 데이터베이스 서버의 로그 출력도 반드시 확인한다. 서버 로그를 보관하지 않고 있다면, 지금부터라도 시작하는 것이 좋다.

* 예상했던 결과를 명시하는 것이 매우 중요하다. "이 명령어가 저런 출력을 보여줍니다" 또는 "이것은 내가 예상한 것이 아닙니다"라고만 작성하면, 개발자가 직접 실행해 보고 출력을 검토한 뒤 문제없이 예상대로 동작한다고 판단할 수 있다. 명령어의 정확한 의미를 해석하는 데 시간을 낭비하지 않도록 해야 한다. 특히 "이는 SQL 표준/Oracle의 동작과 다릅니다"라는 식의 표현은 피해야 한다. SQL 표준에서 올바른 동작을 찾아내는 것은 즐거운 작업이 아니며, 모든 개발자가 다른 관계형 데이터베이스의 동작 방식을 알고 있는 것도 아니다. (프로그램이 충돌하는 경우라면 이 항목은 생략할 수 있다.)

* 모든 명령줄 옵션과 기타 시작 옵션. 기본값에서 변경한 환경 변수나 설정 파일도 포함한다. 이 역시 정확한 정보를 제공해야 한다. 부팅 시 데이터베이스 서버를 시작하는 미리 패키징된 배포판을 사용한다면, 어떻게 시작되는지 확인하도록 한다.

* 설치 지침과 다르게 수행한 모든 작업.

* PostgreSQL 버전 정보. 연결된 서버의 버전을 확인하려면 `SELECT version();` 명령을 실행하면 된다. 대부분의 실행 파일은 `--version` 옵션도 지원한다. 최소한 `postgres --version`과 `psql --version`은 동작할 것이다. 해당 함수나 옵션이 존재하지 않는다면, 업그레이드가 필요할 만큼 오래된 버전이라는 의미다. RPM과 같은 미리 패키징된 버전을 사용한다면 그 사실을 명시하고, 하위 버전 정보도 포함한다. Git 스냅샷을 사용한다면 커밋 해시와 함께 그 사실을 언급한다.

  17.2보다 오래된 버전이라면 거의 확실히 업그레이드를 권장할 것이다. 각 새로운 릴리스에는 많은 버그 수정과 개선 사항이 포함되므로, 이전 버전의 PostgreSQL에서 발견한 버그가 이미 수정되었을 가능성이 높다. 이전 버전의 PostgreSQL에 대해서는 제한된 지원만 제공할 수 있다. 더 많은 지원이 필요하다면 상용 지원 계약을 고려해보는 것이 좋다.

* 플랫폼 정보. 여기에는 커널 이름과 버전, C 라이브러리, 프로세서, 메모리 정보 등이 포함된다. 대부분의 경우 공급업체와 버전을 명시하는 것으로 충분하지만, "Debian"이 정확히 무엇을 포함하는지 또는 모든 사람이 x86_64에서 실행한다는 것을 모든 사람이 알고 있다고 가정하지 않는다. 설치 문제가 있다면 기계의 툴체인(컴파일러, make 등) 정보도 필요하다.

버그 리포트가 길어지더라도 걱정하지 않는다. 이는 자연스러운 현상이다. 처음부터 모든 것을 보고하는 것이 나중에 개발자가 사실을 하나씩 확인해야 하는 상황보다 낫다. 반면, 입력 파일이 매우 큰 경우에는 먼저 누군가가 검토할 의향이 있는지 물어보는 것이 좋다. 버그 리포트 작성에 대한 더 많은 팁을 원한다면 이 [문서](https://www.chiark.greenend.org.uk/~sgtatham/bugs.html)를 참고하면 된다.

입력값을 어떻게 변경하면 문제가 사라지는지 알아내는 데 모든 시간을 쓰지 않는다. 이는 문제 해결에 도움이 되지 않을 것이다. 버그를 즉시 수정할 수 없다면, 나중에 해결 방법을 찾아 공유할 시간이 있을 것이다. 또한 버그가 왜 발생하는지 추측하는 데 시간을 낭비하지 않는다. 개발자가 충분히 빨리 원인을 찾아낼 것이다.

버그 리포트를 작성할 때는 혼란스러운 용어 사용을 피한다. 전체 소프트웨어 패키지는 "PostgreSQL", 줄여서 "Postgres"라고 부른다. 백엔드 프로세스를 특정해서 언급하고 싶다면 그렇게 명시해야 하며, "PostgreSQL이 충돌했다"라고만 표현하지 않는다. 단일 백엔드 프로세스의 충돌은 부모 "postgres" 프로세스의 충돌과 매우 다르다. 단일 백엔드 프로세스가 종료된 것을 두고 "서버가 충돌했다"라고 하거나, 그 반대의 경우도 마찬가지다. 또한 대화형 프론트엔드 "psql"과 같은 클라이언트 프로그램은 백엔드와 완전히 분리되어 있다. 문제가 클라이언트 측인지 서버 측인지 구체적으로 명시하도록 한다.

## 5.3. 버그 리포트 제출 방법

일반적인 버그는 `<pgsql-bugs@lists.postgresql.org>` 메일링 리스트로 제출한다. 메일 제목에는 오류 메시지의 일부와 같이 버그를 잘 설명하는 내용을 포함한다.

프로젝트 [웹사이트](https://www.postgresql.org/)에서 제공하는 웹 양식을 통해 버그를 제출할 수도 있다. 이 방법으로 제출한 버그 리포트는 자동으로 `<pgsql-bugs@lists.postgresql.org>` 메일링 리스트로 전달된다.

보안 관련 버그의 경우 공개 아카이브에 즉시 노출되지 않기를 원한다면, `pgsql-bugs`로 보내지 않는다. 보안 문제는 `<security@postgresql.org>`로 비공개 제출할 수 있다.

`<pgsql-sql@lists.postgresql.org>` 또는 `<pgsql-general@lists.postgresql.org>`와 같은 사용자 메일링 리스트로는 버그 리포트를 보내지 않는다. 이러한 메일링 리스트는 사용자 질문에 답변하는 용도이며, 구독자들은 버그 리포트를 받기를 원하지 않는다. 더욱 중요한 점은 이 리스트의 구독자들이 버그를 수정할 가능성이 낮다는 것이다.

또한 개발자 메일링 리스트인 `<pgsql-hackers@lists.postgresql.org>`로도 버그 리포트를 보내지 않는다. 이 리스트는 PostgreSQL 개발 논의를 위한 공간이며, 버그 리포트는 별도로 관리하는 것이 좋다. 다만 버그에 대한 추가 검토가 필요한 경우 `pgsql-hackers`에서 논의할 수 있다.

문서와 관련된 문제는 문서 메일링 리스트인 `<pgsql-docs@lists.postgresql.org>`로 제출한다. 문서의 어느 부분에 문제가 있는지 구체적으로 설명한다.

지원되지 않는 플랫폼에서의 이식성 문제는 `<pgsql-hackers@lists.postgresql.org>`로 보낸다. 이를 통해 개발자들과 함께 해당 플랫폼에 PostgreSQL을 이식하는 작업을 진행할 수 있다.

### 주의사항

스팸 메일을 방지하기 위해 구독하지 않은 사용자가 보내는 모든 메일은 검토 과정을 거친다. 따라서 메일 전달에 약간의 지연이 발생할 수 있다. 메일링 리스트를 구독하려면 [PostgreSQL 공식 메일링 리스트](https://lists.postgresql.org/)에서 안내하는 절차를 따르면 된다.